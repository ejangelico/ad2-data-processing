
#reduction / processing parameters related to files generated by the analog discovery 2 digitizer
ad2_reduction:
  prefixes: ["glitch", "pmts"] #list of file prefix types that you want to analyze. 
  #all of the following parameters refer to those prefixes and match by index
  filter_tau: [0] #ns, filtering anode signal gaussian, 0 for no filtering
  zero_amplitude_threshold: [0] #if max-sample is less than this, don't integrate
  fit_amplitude_threshold: [0.02] #if max-sample is above this, fit the exponential to get tau and amplitude
  integration_windows: [[0, 5000]] #us, skip integrating the baseline samples, just integrate this window about peak time.
  baseline_window: [[400, 600]] #us, region over which to calculate mean of baseline samples


struck_reduction:
  prefix: "pmts" #this prefix will be attached to dataframe columns associated with this digitizer for later reduction stage. 
  #this replaces the channel map file functionality of the NGMBinaryFile reading. 
  channel_numbers: 
    0: [0,1] #channel numbers that are active in this slot (0) 
  events_per_file: 500 #number of events to chunkify the data into for saving to pickle files during binary processing. 
  clock: 125e6 #Hz clock rate. 
  polarity: 1 #expecting positive or negative pulses
  mv_per_adc: 0.03 
  no_pulse_threshold: 15 #mV, amplitude to discard the event as having nothing
  baseline_window: [0, 40] #number of samples over which to calc baseline
  trigger_location: 50 #location of trigger in samples
  integration_window: [50, 100]
  
  #the struck C++ code that writes a datetime to the filename
  #has a constant offset that is wierd. Use this to correct that timestamp
  timestamp_offset: -25200 #seconds to add to the filename timestamps on struck files.  

#info for voltage reconstruction. These are assumed to be in the dataset location
ramp_name: "ramp.txt"
g_events_name: "g_events.txt"
struck_folder: "struck/"
month: "5" #for a stupid reason, I can't put the month or year into the AD2 datafile names and its needed for good date parsing. 
year: "2023"
